!function(){function e(t,n){return(e=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(t,n)}function t(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,o=i(e);if(t){var s=i(this).constructor;r=Reflect.construct(o,arguments,s)}else r=o.apply(this,arguments);return n(this,r)}}function n(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function i(e){return(i=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function r(e){return function(e){if(Array.isArray(e))return o(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return o(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return o(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function u(e,t,n){return t&&a(e.prototype,t),n&&a(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{"+yXi":function(e,t,n){"use strict";n.d(t,"a",function(){return g}),n.d(t,"b",function(){return v});var i=n("8Y7J"),o=n("SVse"),a=n("s7LF"),c=["cb"],l=function(e,t,n){return{"p-checkbox-label":!0,"p-checkbox-label-active":e,"p-disabled":t,"p-checkbox-label-focus":n}};function h(e,t){if(1&e){var n=i.gc();i.fc(0,"label",7),i.pc("click",function(e){i.Rc(n);var t=i.tc(),r=i.Pc(3);return t.onClick(e,r,!0)}),i.bd(1),i.ec()}if(2&e){var r=i.tc();i.Ob(r.labelStyleClass),i.Ac("ngClass",i.Ic(5,l,r.checked,r.disabled,r.focused)),i.Mb("for",r.inputId),i.Lb(1),i.cd(r.label)}}var d=function(e,t,n){return{"p-checkbox p-component":!0,"p-checkbox-checked":e,"p-checkbox-disabled":t,"p-checkbox-focused":n}},f=function(e,t,n){return{"p-highlight":e,"p-disabled":t,"p-focus":n}},p={provide:a.l,useExisting:Object(i.db)(function(){return g}),multi:!0},g=function(){var e=function(){function e(t){s(this,e),this.cd=t,this.checkboxIcon="pi pi-check",this.onChange=new i.p,this.onModelChange=function(){},this.onModelTouched=function(){},this.focused=!1,this.checked=!1}return u(e,[{key:"onClick",value:function(e,t,n){e.preventDefault(),this.disabled||this.readonly||(this.checked=!this.checked,this.updateModel(e),n&&t.focus())}},{key:"updateModel",value:function(e){this.binary?this.onModelChange(this.checked):(this.checked?this.addValue():this.removeValue(),this.onModelChange(this.model),this.formControl&&this.formControl.setValue(this.model)),this.onChange.emit({checked:this.checked,originalEvent:e})}},{key:"handleChange",value:function(e){this.readonly||(this.checked=e.target.checked,this.updateModel(e))}},{key:"isChecked",value:function(){return this.binary?this.model:this.model&&this.model.indexOf(this.value)>-1}},{key:"removeValue",value:function(){var e=this;this.model=this.model.filter(function(t){return t!==e.value})}},{key:"addValue",value:function(){this.model=this.model?[].concat(r(this.model),[this.value]):[this.value]}},{key:"onFocus",value:function(){this.focused=!0}},{key:"onBlur",value:function(){this.focused=!1,this.onModelTouched()}},{key:"focus",value:function(){this.inputViewChild.nativeElement.focus()}},{key:"writeValue",value:function(e){this.model=e,this.checked=this.isChecked(),this.cd.markForCheck()}},{key:"registerOnChange",value:function(e){this.onModelChange=e}},{key:"registerOnTouched",value:function(e){this.onModelTouched=e}},{key:"setDisabledState",value:function(e){this.disabled=e,this.cd.markForCheck()}}]),e}();return e.\u0275fac=function(t){return new(t||e)(i.Zb(i.h))},e.\u0275cmp=i.Tb({type:e,selectors:[["p-checkbox"]],viewQuery:function(e,t){var n;(1&e&&i.hd(c,1),2&e)&&(i.Oc(n=i.qc())&&(t.inputViewChild=n.first))},inputs:{checkboxIcon:"checkboxIcon",disabled:"disabled",value:"value",name:"name",binary:"binary",label:"label",ariaLabelledBy:"ariaLabelledBy",ariaLabel:"ariaLabel",tabindex:"tabindex",inputId:"inputId",style:"style",styleClass:"styleClass",labelStyleClass:"labelStyleClass",formControl:"formControl",readonly:"readonly",required:"required"},outputs:{onChange:"onChange"},features:[i.Kb([p])],decls:7,vars:26,consts:[[3,"ngStyle","ngClass"],[1,"p-hidden-accessible"],["type","checkbox",3,"readonly","value","checked","disabled","focus","blur","change"],["cb",""],[1,"p-checkbox-box",3,"ngClass","click"],[1,"p-checkbox-icon",3,"ngClass"],[3,"class","ngClass","click",4,"ngIf"],[3,"ngClass","click"]],template:function(e,t){if(1&e){var n=i.gc();i.fc(0,"div",0),i.fc(1,"div",1),i.fc(2,"input",2,3),i.pc("focus",function(){return t.onFocus()})("blur",function(){return t.onBlur()})("change",function(e){return t.handleChange(e)}),i.ec(),i.ec(),i.fc(4,"div",4),i.pc("click",function(e){i.Rc(n);var r=i.Pc(3);return t.onClick(e,r,!0)}),i.ac(5,"span",5),i.ec(),i.ec(),i.Zc(6,h,2,9,"label",6)}2&e&&(i.Ob(t.styleClass),i.Ac("ngStyle",t.style)("ngClass",i.Ic(18,d,t.checked,t.disabled,t.focused)),i.Lb(2),i.Ac("readonly",t.readonly)("value",t.value)("checked",t.checked)("disabled",t.disabled),i.Mb("id",t.inputId)("name",t.name)("tabindex",t.tabindex)("aria-labelledby",t.ariaLabelledBy)("aria-label",t.ariaLabel)("aria-checked",t.checked)("required",t.required),i.Lb(2),i.Ac("ngClass",i.Ic(22,f,t.checked,t.disabled,t.focused)),i.Lb(1),i.Ac("ngClass",t.checked?t.checkboxIcon:null),i.Lb(1),i.Ac("ngIf",t.label))},directives:[o.p,o.m,o.o],styles:[".p-checkbox{-ms-user-select:none;-webkit-user-select:none;cursor:pointer;display:inline-flex;user-select:none;vertical-align:bottom}.p-checkbox-disabled{cursor:default!important;pointer-events:none}.p-checkbox-box{align-items:center;display:flex;justify-content:center}p-checkbox{align-items:center;display:inline-flex;vertical-align:bottom}.p-checkbox-label{line-height:1}"],encapsulation:2,changeDetection:0}),e}(),v=function(){var e=u(function e(){s(this,e)});return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i.Xb({type:e}),e.\u0275inj=i.Wb({imports:[[o.c]]}),e}()},"1QP5":function(e,t,n){"use strict";n.d(t,"a",function(){return p});var i,r=n("8Y7J"),o=n("SVse"),a=n("c/fn"),c=(n("GS7A"),n("hhfa")),l=n("xCnN"),h=((i=u(function e(){s(this,e)})).\u0275fac=function(e){return new(e||i)},i.\u0275mod=r.Xb({type:i}),i.\u0275inj=r.Wb({imports:[[o.c,l.b]]}),i),d=n("S0UM");n("Ckfk"),n("IheW"),n("cUpR");var f,p=((f=u(function e(){s(this,e)})).\u0275fac=function(e){return new(e||f)},f.\u0275mod=r.Xb({type:f}),f.\u0275inj=r.Wb({imports:[[o.c,c.k,a.c,d.b,h,l.b],c.k,a.c,d.b,h]}),f)},"6wkk":function(e,t,n){"use strict";n.d(t,"a",function(){return i});var i=function(e){return e.Admin="admin",e.ReadOnly="readonly",e.Cloud="cloud",e.Origin="origin",e}({})},A2tc:function(e,t,n){"use strict";n.d(t,"a",function(){return g});var i=n("qOj+"),r=n("evxF"),o=n("8Y7J"),a=n("iInd"),c=n("TSSN"),l=n("0JRf"),h=n("YHJu"),d=n("hhfa"),f=function(){return{width:"50vw"}},p=function(e){return{countdown:e}},g=function(){var e=function(){function e(t,n,i,r,o){var a=this;s(this,e),this.router=t,this.authService=n,this.translate=i,this.idle=r,this.keepalive=o,this.alertAt=60,this.startTimer=!0,this.subs=[],this.countdown=0,this.displayModal=!1,this.serverSessionTimeOut=0,this.WARNING_TIMEOUT=10,this.subs.push(this.authService.loginAction.subscribe(function(e){e&&"login"===e?a.initIdleTracker():a.idle.isRunning&&a.idle.stop()}))}return u(e,[{key:"ngOnInit",value:function(){this.authService.getLogInStatus().isAuthenticated&&this.initIdleTracker()}},{key:"initIdleTracker",value:function(){var e=this;this.idle.isRunning&&this.idle.stop(),this.setIdleTimeoutWithBuffer(this.authService.getSessionTimeout()),this.idle.setIdle(this.idleWarn),this.idle.setTimeout(this.WARNING_TIMEOUT),this.idle.setInterrupts(r.a),this.subs.push(this.idle.onIdleStart.subscribe(function(){e.displayModal=!0})),this.subs.push(this.idle.onIdleEnd.subscribe(function(){e.resetIdleState()})),this.subs.push(this.idle.onTimeoutWarning.subscribe(function(t){e.countdown=t})),this.subs.push(this.idle.onTimeout.subscribe(function(){e.authService.changeIsSessionTimedOut(!0),e.logoutUser()})),this.idle.setKeepaliveEnabled(!0),this.keepalive.interval(this.keepAliveTime),this.subs.push(this.keepalive.onPing.subscribe(function(){!1===e.displayModal&&e.authService.ping().subscribe(function(){})})),this.idle.watch()}},{key:"setIdleTimeoutWithBuffer",value:function(e){this.serverSessionTimeOut=e>0?Math.floor(e/1e3):600;var t=this.serverSessionTimeOut;t<60&&(t=60),t>=180?(this.idleWarn=t-90,this.WARNING_TIMEOUT=30,this.keepAliveTime=t-40):(this.idleWarn=Math.floor(t/2),this.WARNING_TIMEOUT=Math.floor(t/2-10),this.keepAliveTime=t-40),this.serverSessionTimeOut=600}},{key:"resetIdleState",value:function(){this.idle.stop(),this.idle.watch()}},{key:"stayLoggedIn",value:function(){var e=this;this.displayModal=!1,this.authService.ping().subscribe(function(){e.resetIdleState()})}},{key:"logoutUser",value:function(){var e=this;this.displayModal=!1,this.idle.stop();var t=this.authService.isOpenID(),n=this.authService.getSSOLoginUrl();this.authService.invokeLogout().subscribe(function(i){e.authService.logout(),t?(console.log("*****ssologout:"+n),e.router.navigate(["/ssologout"],{queryParams:{redirectURL:n}})):-1==e.router.url.indexOf("/login")&&e.router.navigate(["/login"],{queryParams:{redirectURL:e.router.routerState.snapshot.url}})},function(t){console.log("Error",t),e.authService.logout(),-1==e.router.url.indexOf("/login")&&e.router.navigate(["/login"],{queryParams:{redirectURL:e.router.routerState.snapshot.url}})})}},{key:"hideIdleDialog",value:function(){}},{key:"ngOnChanges",value:function(e){}},{key:"ngOnDestroy",value:function(){this.subs.forEach(function(e){return e.unsubscribe()}),this.idle.stop(),this.idle.clearInterrupts()}},{key:"getIdle",value:function(){return this.idle}},{key:"getkeepalive",value:function(){return this.keepalive}}]),e}();return e.\u0275fac=function(t){return new(t||e)(o.Zb(a.f),o.Zb(i.a),o.Zb(c.d),o.Zb(r.b),o.Zb(l.a))},e.\u0275cmp=o.Tb({type:e,selectors:[["acl-session-expiration-alert"]],inputs:{alertAt:"alertAt",startTimer:"startTimer"},features:[o.Jb],decls:13,vars:24,consts:[[3,"header","visible","modal","baseZIndex","draggable","resizable","closeOnEscape","visibleChange","onHide"],[1,"footer-buttons-wrapper"],["type","button","title","Continue Session","attr.aria-label","Continue Session","tabindex","0",1,"dlt-button","dlt-button-primary",3,"click"],["type","button","title","Logout","attr.aria-label","Logout","tabindex","0",1,"dlt-button","dlt-button-secondary",3,"click"]],template:function(e,t){1&e&&(o.fc(0,"p-dialog",0),o.pc("visibleChange",function(e){return t.displayModal=e})("onHide",function(){return t.hideIdleDialog()}),o.uc(1,"translate"),o.fc(2,"p"),o.bd(3),o.uc(4,"translate"),o.ec(),o.fc(5,"p-footer"),o.fc(6,"div",1),o.fc(7,"button",2),o.pc("click",function(){return t.displayModal=!1,t.stayLoggedIn()}),o.bd(8),o.uc(9,"translate"),o.ec(),o.fc(10,"button",3),o.pc("click",function(){return t.displayModal=!1,t.logoutUser()}),o.bd(11),o.uc(12,"translate"),o.ec(),o.ec(),o.ec(),o.ec()),2&e&&(o.Wc(o.Fc(21,f)),o.Bc("header",o.vc(1,12,"common.ssnTimeout.title")),o.Ac("visible",t.displayModal)("modal",!0)("baseZIndex",1e4)("draggable",!1)("resizable",!1)("closeOnEscape",!0),o.Lb(3),o.dd(" ",o.wc(4,14,"common.ssnTimeout.warningMsg",o.Gc(22,p,""+t.countdown))," "),o.Lb(5),o.dd(" ",o.vc(9,17,"common.ssnTimeout.stayLogin"),""),o.Lb(3),o.cd(o.vc(12,19,"common.ssnTimeout.logout")))},directives:[h.a,d.f],pipes:[c.c],styles:[".buttons-wrapper[_ngcontent-%COMP%], .footer-buttons-wrapper[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;align-items:center;margin-top:0}.divider[_ngcontent-%COMP%]{width:.5rem;height:auto;display:inline-block}"]}),e}()},"K+T9":function(e,t,n){"use strict";n.d(t,"a",function(){return c});var i=n("SVse"),r=n("TSSN"),o=n("YHJu"),a=n("8Y7J"),c=function(){var e=u(function e(){s(this,e)});return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=a.Xb({type:e}),e.\u0275inj=a.Wb({imports:[[i.c,r.b,o.b]]}),e}()},Kev4:function(e,t,n){"use strict";n.d(t,"a",function(){return o});var i=n("XNiG"),r=n("8Y7J"),o=function(){var e=function(){function e(){s(this,e),this.subject=new i.a}return u(e,[{key:"sendMessage",value:function(e){this.subject.next({data:e})}},{key:"clearMessage",value:function(){this.subject.next()}},{key:"getMessage",value:function(){return this.subject.asObservable()}}]),e}();return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=r.Vb({token:e,factory:e.\u0275fac,providedIn:"root"}),e}()},S0UM:function(e,t,n){"use strict";n.d(t,"a",function(){return h}),n.d(t,"b",function(){return d});var i=n("SVse"),r=n("8Y7J");function o(e,t){if(1&e&&r.ac(0,"div",4),2&e){var n=r.tc();r.Xc("width",n.value+"%")}}function a(e,t){if(1&e&&(r.fc(0,"div",5),r.bd(1),r.ec()),2&e){var n=r.tc();r.Xc("display",null!=n.value?"block":"none"),r.Lb(1),r.ed("",n.value,"",n.unit,"")}}function c(e,t){1&e&&(r.fc(0,"div",6),r.ac(1,"div",7),r.ec())}var l=function(e,t){return{"p-progressbar p-component":!0,"p-progressbar-determinate":e,"p-progressbar-indeterminate":t}},h=function(){var e=u(function e(){s(this,e),this.showValue=!0,this.unit="%",this.mode="determinate"});return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=r.Tb({type:e,selectors:[["p-progressBar"]],inputs:{showValue:"showValue",unit:"unit",mode:"mode",value:"value",style:"style",styleClass:"styleClass"},decls:4,vars:11,consts:[["role","progressbar","aria-valuemin","0","aria-valuemax","100",3,"ngStyle","ngClass"],["class","p-progressbar-value p-progressbar-value-animate","style","display:block",3,"width",4,"ngIf"],["class","p-progressbar-label",3,"display",4,"ngIf"],["class","p-progressbar-indeterminate-container",4,"ngIf"],[1,"p-progressbar-value","p-progressbar-value-animate",2,"display","block"],[1,"p-progressbar-label"],[1,"p-progressbar-indeterminate-container"],[1,"p-progressbar-value","p-progressbar-value-animate"]],template:function(e,t){1&e&&(r.fc(0,"div",0),r.Zc(1,o,1,2,"div",1),r.Zc(2,a,2,4,"div",2),r.Zc(3,c,2,0,"div",3),r.ec()),2&e&&(r.Ob(t.styleClass),r.Ac("ngStyle",t.style)("ngClass",r.Hc(8,l,"determinate"===t.mode,"indeterminate"===t.mode)),r.Mb("aria-valuenow",t.value),r.Lb(1),r.Ac("ngIf","determinate"===t.mode),r.Lb(1),r.Ac("ngIf","determinate"===t.mode&&t.showValue),r.Lb(1),r.Ac("ngIf","indeterminate"===t.mode))},directives:[i.p,i.m,i.o],styles:['.p-progressbar{overflow:hidden;position:relative}.p-progressbar-determinate .p-progressbar-value{border:0;display:none;height:100%;position:absolute;width:0}.p-progressbar-determinate .p-progressbar-value-animate{transition:width 1s ease-in-out}.p-progressbar-determinate .p-progressbar-label{font-weight:700;height:100%;position:absolute;text-align:center;width:100%}.p-progressbar-indeterminate .p-progressbar-value:before{animation:p-progressbar-indeterminate-anim 2.1s cubic-bezier(.65,.815,.735,.395) infinite;background-color:inherit;bottom:0;content:"";left:0;position:absolute;top:0;will-change:left,right}.p-progressbar-indeterminate .p-progressbar-value:after{animation:p-progressbar-indeterminate-anim-short 2.1s cubic-bezier(.165,.84,.44,1) infinite;animation-delay:1.15s;background-color:inherit;bottom:0;content:"";left:0;position:absolute;top:0;will-change:left,right}@keyframes p-progressbar-indeterminate-anim{0%{left:-35%;right:100%}60%{left:100%;right:-90%}to{left:100%;right:-90%}}@keyframes p-progressbar-indeterminate-anim-short{0%{left:-200%;right:100%}60%{left:107%;right:-8%}to{left:107%;right:-8%}}'],encapsulation:2,changeDetection:0}),e}(),d=function(){var e=u(function e(){s(this,e)});return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=r.Xb({type:e}),e.\u0275inj=r.Wb({imports:[[i.c]]}),e}()},VD0L:function(e,t,n){"use strict";n.d(t,"a",function(){return i});var i=u(function e(t,n){s(this,e),this.pageSize=20,this.tableId=t,this.tableColumnInfo=n})},"Za8/":function(e,t,n){"use strict";n.d(t,"a",function(){return i});var i=function(){function e(){s(this,e)}return u(e,[{key:"getItem",value:function(e){if(this.localStorage){var t=this.localStorage.getItem(e);if(t&&"undefined"!==t)return"string"==typeof t?JSON.parse(t):t}return null}},{key:"setItem",value:function(e,t){this.localStorage&&("string"==typeof t&&this.localStorage.setItem(e,t),this.localStorage.setItem(e,JSON.stringify(t)))}},{key:"removeItem",value:function(e){this.localStorage&&this.localStorage.remove(e)}},{key:"clear",value:function(){this.localStorage&&this.localStorage.clear()}}]),e}()},e7Go:function(e,t,n){"use strict";n.d(t,"a",function(){return h});var i=n("IheW"),r=n("z6cu"),o=n("JIr8"),a=n("qOj+"),c=n("8Y7J"),l=n("iInd"),h=function(){var e=function(){function e(t,n){s(this,e),this.authService=t,this.router=n}return u(e,[{key:"intercept",value:function(e,t){var n=this,i=e.headers;return(i=i.append("X-wM-AdminUI","true")).get("Accept")||(i=i.append("Accept","application/json")),this.authService.getCSRFToken()&&(i=i.append("X-CSRF-TOKEN",this.authService.getCSRFToken())),e=e.clone({withCredentials:!0,headers:i}),t.handle(e).pipe(Object(o.a)(function(i){switch(i.status){case 400:return n.handle400Error(i);case 401:return n.handle401Error(i,e,t);case 500:return n.handle500Error(i);case 403:return n.handle403Error(i);case 404:return n.handle404Error(i);case 502:return n.handle502Error(i);default:return Object(r.a)(i)}return Object(r.a)(i)}))}},{key:"isSSO",value:function(e){return e&&e.includes("?")&&new i.g({fromString:e.split("?")[1]}).get("sso"),!1}},{key:"removeSSOQueryParam",value:function(e,t){console.log("++++++originalURL"),console.log(t);var n=t.split("?")[0],i=[],r=-1!==t.indexOf("?")?t.split("?")[1]:"";if(""!==r){for(var o=(i=r.split("&")).length-1;o>=0;o-=1)i[o].split("=")[0]===e&&i.splice(o,1);i.length&&(n=n+"?"+i.join("&"))}return console.log("++++++urlwithout sso QP:"),console.log(n),n}},{key:"handle500Error",value:function(e){return Object(r.a)(e)}},{key:"handle502Error",value:function(e){return console.log("Bad Gateway"),Object(r.a)(e)}},{key:"handle403Error",value:function(e){return e&&403===e.status&&e.error?(console.log("You may not have sufficient permissions to do this operation. Get the required permissions and then try again."),this.logoutUser(e)):Object(r.a)(e)}},{key:"handle404Error",value:function(e){return Object(r.a)(e)}},{key:"handle400Error",value:function(e){return Object(r.a)(e)}},{key:"handle401Error",value:function(e,t,n){return this.logoutUser(e)}},{key:"logoutUser",value:function(e){if(this.authService.logout(),this.authService.isOpenID()){var t=this.authService.getSSOLoginUrl();this.authService.logout(),console.log("*****url:"+t),this.router.navigate(["/ssologout"],{queryParams:{redirectURL:t}})}else-1==this.router.url.indexOf("/login")&&this.router.navigate(["/login"],{queryParams:{redirectURL:this.router.routerState.snapshot.url}});return Object(r.a)(e)}}]),e}();return e.\u0275fac=function(t){return new(t||e)(c.mc(a.a),c.mc(l.f))},e.\u0275prov=c.Vb({token:e,factory:e.\u0275fac}),e}()},pcPN:function(e,t,n){"use strict";n.d(t,"a",function(){return r});var i=n("8Y7J"),r=function(){var e=function(){function e(){s(this,e)}return u(e,[{key:"set",value:function(e,t){localStorage[this._prefix(e)]=t}},{key:"getString",value:function(e,t){return localStorage[this._prefix(e)]||t}},{key:"getNumber",value:function(e,t){var n=localStorage[this._prefix(e)];return n?Number.parseFloat(n):t}},{key:"getBoolean",value:function(e,t){var n=localStorage[this._prefix(e)];return n?"true"===n:t}},{key:"setItem",value:function(e,t){localStorage[this._prefix(e)]=JSON.stringify(t)}},{key:"getItem",value:function(e,t){e=this._prefix(e);try{return JSON.parse(localStorage[e])}catch(n){return t}}},{key:"remove",value:function(e){delete localStorage[this._prefix(e)]}},{key:"clear",value:function(){localStorage.clear()}},{key:"_prefix",value:function(e){return""+e}}]),e}();return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=i.Vb({token:e,factory:e.\u0275fac,providedIn:"root"}),e}()},"qOj+":function(n,i,r){"use strict";r.d(i,"b",function(){return k}),r.d(i,"a",function(){return S});var o=r("2Vo4"),a=r("z6cu"),c=r("LRne"),l=r("IheW"),h=r("8Y7J"),d=r("Za8/"),f=r("6wkk"),p=r("pcPN"),g=r("uJJM"),v=r("z4EA"),b=r("TSSN"),m=r("zGRK"),y=r("EApP"),k={isAuthenticated:!1,userRole:f.a.Admin,userId:null,timeout:0},S=function(){var n=function(n){!function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),n&&e(t,n)}(r,n);var i=t(r);function r(e,t,n,a,u,c){var l;return s(this,r),(l=i.call(this)).httpClient=e,l.translate=n,l.permissionsService=u,l.toastr=c,l.isSessionTimedOutSource=new o.a(!1),l.isSessionTimedOut=l.isSessionTimedOutSource.asObservable(),l.openIdLogin=!1,l._silentLogin=!1,l.ssoLoginUrl="/",l.csrfToken=new o.a(l.getItem("sagISCSRFToken")||""),l.isMSRLicensed=new o.a(l.getItem("isMSRLicensed")||""),l.isMSRInstalled=new o.a(l.getItem("isMSRInstalled")||""),l.isSafeMode=new o.a(l.getItem("isSafeMode")||""),l.isQuiesceMode=new o.a(l.getItem("isQuiesceMode")||""),l.loginAction=new o.a(""),l.authStatus=new o.a(l.getItem("sagISAuthStatus")||k),l.localStorage=a,l.cookieService=t,l}return u(r,[{key:"isOpenID",value:function(){return this.openIdLogin}},{key:"silentLogin",get:function(){return this._silentLogin},set:function(e){this._silentLogin=e}},{key:"getSSOLoginUrl",value:function(){return this.ssoLoginUrl}},{key:"getAuthProvider",value:function(){return this.adminConsoleAuthProvider}},{key:"changePassword",value:function(e,t){var n=new l.f,i={headers:n=(n=(n=n.append("Content-Type","application/json")).append("Accept-Language",this.translate.currentLang)).append("Accept","application/json"),withCredentials:!0};return this.httpClient.post(this.getISBaseUrl()+"/invoke/wm.server.access/userUpdate",{username:e,password:t},i)}},{key:"ssoLogin",value:function(){return this.login("","",!0)}},{key:"login",value:function(e,t,n){n?this.silentLogin=!0:(this.openIdLogin=!1,this.silentLogin=!1),this.ssoLoginUrl="/";var i=""+this.getISBaseUrl();i&&(i=i.trim());var r=this.getLogInStatus();return r&&r.isAuthenticated&&this.logoutCleanup(),this.localStorage.setItem("sagAPIServerUrl",""+encodeURIComponent(i)),this.adminConsoleAuthProvider(e,t,n)}},{key:"setLoginInformation",value:function(e,t){var n=e?e.metadata:null,i="",r="false",o="false",s="false",a="false",u="",c="",l=f.a.Admin;n&&"administrator"===n.userType&&(l=f.a.Admin),!t&&n&&n.username&&(t=n.username),this.ssoLoginUrl="/",e&&e.ssoLoginUrl?(this.openIdLogin=!0,this.ssoLoginUrl=e.ssoLoginUrl):this.openIdLogin=!1,n&&n["X-CSRF-TOKEN"]&&n["X-CSRF-TOKEN"].length>0&&(i=n["X-CSRF-TOKEN"]),n&&n.isMSRLicensed&&(r=n.isMSRLicensed),n&&n.isMSRInstalled&&(o=n.isMSRInstalled),n&&n.isSafeMode&&(s=n.isSafeMode),n&&n.isQuiesceMode&&(a=n.isQuiesceMode),n&&n.hostName&&(u=n.hostName),n&&n.instanceName&&(c=n.instanceName);var h=0;n&&n.clientTimeout&&(h=n.clientTimeout);var d=new g.a(!0,l,t,u,c,h);return i?this.setItem("sagISCSRFToken",i):this.removeItem("sagISCSRFToken"),r&&"true"===r?this.setItem("isMSRLicensed","true"):this.removeItem("isMSRLicensed"),o&&"true"===o?this.setItem("isMSRInstalled","true"):this.removeItem("isMSRInstalled"),s&&"true"===s?this.setItem("isSafeMode","true"):this.removeItem("isSafeMode"),a&&"true"===a?this.setItem("isQuiesceMode","true"):this.removeItem("isQuiesceMode"),this.setItem("sagISAuthStatus",d),this.loginAction.next("login"),d}},{key:"getCSRFToken",value:function(){return this.getItem("sagISCSRFToken")?this.getItem("sagISCSRFToken"):null}},{key:"getIsMSRLicensed",value:function(){var e=this.getItem("isMSRLicensed");return!(!e||"true"!==e)}},{key:"getIsMSRInstalled",value:function(){var e=this.getItem("isMSRInstalled");return!(!e||"true"!==e)}},{key:"getIsSafeMode",value:function(){var e=this.getItem("isSafeMode");return!(!e||"true"!==e)}},{key:"getIsQuiesceMode",value:function(){var e=this.getItem("isQuiesceMode");return!(!e||"true"!==e)}},{key:"getLogInStatus",value:function(){var e=this.getItem("sagISAuthStatus");return e||(e=k),e}},{key:"getCurrentUser",value:function(){var e=this.getItem("sagISAuthStatus");return e?e.userId:""}},{key:"getSessionTimeout",value:function(){return this.getLogInStatus().timeout}},{key:"adminConsoleAuthProvider",value:function(e,t,n){console.log("*****adminConsoleAuthProvider");var i=new l.f;i=(i=(i=i.append("Content-Type","application/json")).append("Accept-Language",this.translate.currentLang)).append("Accept","application/json"),n&&(i=i.append("X-Active-IS-Session","true"));var r={headers:i,withCredentials:!0},o=this.getISBaseUrl();return this.httpClient.post(o+"/invoke/wm.server/login",{username:e,password:t},r)}},{key:"getISBaseUrl",value:function(){if(Object(h.fb)())return"";var e=location.pathname.split("/"),t=location.origin;if(e&&e.length>1)for(var n=1;n<e.length;n++){var i=e[n];if(!(i&&i.length>0))break;"WmAdmin"!==i&&"WmCDS"!==i&&(t=t+"/"+i)}return t.endsWith("/")&&(t=t.substring(0,t.length-1)),t}},{key:"fakeAuthProvider",value:function(e,t){return"Administrator"!==e?Object(a.a)("Failed to login! Can not find user"):"manage"!==t?Object(a.a)("Failed to login! Wrong password"):Object(c.a)({sessionId:"MYHandySessionID",metadata:{isAdministrator:!0}})}},{key:"invokeLogout",value:function(){var e=new l.f,t={headers:e=(e=(e=e.append("Content-Type","application/json")).append("Accept-Language",this.translate.currentLang)).append("Accept","application/json"),withCredentials:!0},n=this.getISBaseUrl();return this.httpClient.post(n+"/invoke/wm.server/logout",t)}},{key:"logout",value:function(){this.logoutCleanup()}},{key:"logoutCleanup",value:function(){this.ssoLoginUrl="/",this.clearStorage(),this.removePermissions(),this.authStatus.next(k),this.loginAction.next("logout")}},{key:"clearStorage",value:function(){this.cookieService.delete("ssnid","/"),this.removeItem("sagISAuthStatus"),this.removeItem("sagAPIServerUrl"),this.removeItem("sagISCSRFToken"),this.removeItem("isMSRLicensed"),this.removeItem("isMSRInstalled"),this.removeItem("isSafeMode"),this.removeItem("isQuiesceMode")}},{key:"ping",value:function(){var e=this.getISBaseUrl()+"/invoke/wm.server/ping";return this.httpClient.get(e)}},{key:"changeIsSessionTimedOut",value:function(e){this.isSessionTimedOutSource.next(e)}},{key:"getIsSessionTimedOut",value:function(){return this.isSessionTimedOut}},{key:"addPermissions",value:function(e){}},{key:"removePermissions",value:function(){this.permissionsService.flushPermissions()}}]),r}(d.a);return n.\u0275fac=function(e){return new(e||n)(h.mc(l.b),h.mc(v.a),h.mc(b.d),h.mc(p.a),h.mc(m.d),h.mc(y.b))},n.\u0275prov=h.Vb({token:n,factory:n.\u0275fac,providedIn:"root"}),n}()},t1yq:function(e,t,n){"use strict";n.d(t,"a",function(){return l});var i=n("qOj+"),r=n("8Y7J"),o=n("iInd"),a=n("EApP"),c=n("TSSN"),l=function(){var e=function(){function e(t,n,i,r){var o=this;s(this,e),this.authService=t,this.router=n,this.toastr=i,this.translate=r,this.authService.authStatus.subscribe(function(e){o.currentAuthStatus=e})}return u(e,[{key:"getCurrentAuthStatus",value:function(){return this.authService.getLogInStatus()}},{key:"canActivate",value:function(e,t){return this.checkLogin(e,t)}},{key:"canActivateChild",value:function(e,t){return this.checkLogin(e,t)}},{key:"checkLogin",value:function(e,t){var n=!0,i=this.getCurrentAuthStatus();if(e){var r=e.data.expectedRole;r&&(n=i.userRole===r),n&&{redirectURL:this.getRedirectUrl(e)}}return!(!i.isAuthenticated||!n)||(this.showAlert(i.isAuthenticated,n),this.router.navigate(["/login"],{queryParams:{redirectURL:t.url}}),!1)}},{key:"getRedirectUrl",value:function(e){return e.pathFromRoot.map(function(e){return e.url}).join("/")}},{key:"showAlert",value:function(e,t){t||this.toastr.error(this.translate.instant("LOGIN_NO_VIEW_PERMISSION"),this.translate.instant("common.error"))}}]),e}();return e.\u0275fac=function(t){return new(t||e)(r.mc(i.a),r.mc(o.f),r.mc(a.b),r.mc(c.d))},e.\u0275prov=r.Vb({token:e,factory:e.\u0275fac,providedIn:"root"}),e}()},uJJM:function(e,t,n){"use strict";n.d(t,"a",function(){return i});var i=u(function e(t,n,i,r,o,a){s(this,e),this.isAuthenticated=t,this.userRole=n,this.userId=i,this.remoteHostName=r,this.instanceName=o,this.timeout=a})}}])}();